import{_ as i,r,o as l,c as d,a as s,b as o,d as n,e}from"./app.20341b03.js";const c={},p=n(`<h1 id="criar-um-plug-in" tabindex="-1"><a class="header-anchor" href="#criar-um-plug-in" aria-hidden="true">#</a> Criar um plug-in</h1><blockquote><p>Hi, we&#39;ve recently migrated our docs and added some new pages. If you would like to help translate this page, see the &quot;Edit this page&quot; link at the bottom of the page.</p></blockquote><h2 id="o-que-ha-em-um-plug-in" tabindex="-1"><a class="header-anchor" href="#o-que-ha-em-um-plug-in" aria-hidden="true">#</a> O que h\xE1 em um plug-in</h2><p>Um plugin \xE9 um reposit\xF3rio git, com alguns scripts execut\xE1veis, para dar suporte ao versionamento de outra linguagem ou ferramenta. Esses scripts s\xE3o executados quando os comandos <code>list-all</code>, <code>install</code> ou <code>uninstall</code> s\xE3o executados. Voc\xEA pode definir ou desmarcar env vars e fazer qualquer coisa necess\xE1ria para configurar o ambiente para a ferramenta.</p><h2 id="scripts-obrigatorios" tabindex="-1"><a class="header-anchor" href="#scripts-obrigatorios" aria-hidden="true">#</a> Scripts obrigat\xF3rios</h2><ul><li><code>bin/list-all</code> - lista todas as vers\xF5es instal\xE1veis</li><li><code>bin/download</code> - baixe o c\xF3digo fonte ou bin\xE1rio para a vers\xE3o especificada</li><li><code>bin/install</code> - instala a vers\xE3o especificada</li></ul><h2 id="variaveis-de-ambiente" tabindex="-1"><a class="header-anchor" href="#variaveis-de-ambiente" aria-hidden="true">#</a> Variav\xE9is de Ambiente</h2><p>Todos os scripts, exceto <code>bin/list-all</code>, ter\xE3o acesso aos seguintes env vars para agir:</p><ul><li><code>ASDF_INSTALL_TYPE</code> - <code>version</code> ou <code>ref</code></li><li><code>ASDF_INSTALL_VERSION</code> - se <code>ASDF_INSTALL_TYPE</code> \xE9 <code>version</code> ent\xE3o este ser\xE1 o n\xFAmero da vers\xE3o. Caso contr\xE1rio, ser\xE1 o git ref que ser\xE1 passado. Pode apontar para uma tag/commit/branch no reposit\xF3rio.</li><li><code>ASDF_INSTALL_PATH</code> - o diret\xF3rio onde <em>foi</em> instalado (ou <em>deve</em> ser instalado no caso do script <code>bin/install</code>)</li></ul><p>Essas vari\xE1veis de ambiente adicionais estar\xE3o dispon\xEDveis para o script <code>bin/install</code>:</p><ul><li><code>ASDF_CONCURRENCY</code> - o n\xFAmero de n\xFAcleos a serem usados ao compilar o c\xF3digo-fonte. \xDAtil para definir <code>make -j</code>.</li><li><code>ASDF_DOWNLOAD_PATH</code> - o caminho para onde o c\xF3digo fonte ou bin\xE1rio foi baixado pelo script <code>bin/download</code>.</li></ul><p>Essas vari\xE1veis de ambiente adicionais estar\xE3o dispon\xEDveis para o script <code>bin/download</code>:</p><ul><li><code>ASDF_DOWNLOAD_PATH</code> - o caminho para onde o c\xF3digo-fonte ou bin\xE1rio deve ser baixado.</li></ul><h4 id="bin-list-all" tabindex="-1"><a class="header-anchor" href="#bin-list-all" aria-hidden="true">#</a> bin/list-all</h4><p>Deve imprimir uma string com uma lista de vers\xF5es separadas por espa\xE7o. A sa\xEDda de exemplo seria a seguinte:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">1.0.1 1.0.2 1.3.0 1.4</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Observe que a vers\xE3o mais recente deve ser listada por \xFAltimo para que apare\xE7a mais pr\xF3xima do prompt do usu\xE1rio. Isso \xE9 \xFAtil j\xE1 que o comando <code>list-all</code> imprime cada vers\xE3o em sua pr\xF3pria linha. Se houver muitas vers\xF5es, \xE9 poss\xEDvel que as primeiras vers\xF5es fiquem fora da tela.</p>`,17),t=e("Se as vers\xF5es estiverem sendo extra\xEDdas da p\xE1gina de lan\xE7amentos em um site, \xE9 recomend\xE1vel n\xE3o classificar as vers\xF5es, se poss\xEDvel. Muitas vezes as vers\xF5es j\xE1 est\xE3o na ordem correta ou, na ordem inversa, nesse caso algo como "),u=s("code",null,"tac",-1),m=e(" deve ser suficiente. Se voc\xEA precisar classificar as vers\xF5es manualmente, n\xE3o poder\xE1 confiar em "),h=s("code",null,"sort -V",-1),v=e(", pois n\xE3o \xE9 suportado no OSX. Uma fun\xE7\xE3o de classifica\xE7\xE3o alternativa "),b={href:"https://github.com/vic/asdf-idris/blob/master/bin/list-all#L6",target:"_blank",rel:"noopener noreferrer"},F=e("como esta \xE9 uma escolha melhor"),f=e("."),g=n('<h4 id="bin-download" tabindex="-1"><a class="header-anchor" href="#bin-download" aria-hidden="true">#</a> bin/download</h4><p>Este script deve baixar o c\xF3digo fonte ou bin\xE1rio, no caminho contido na vari\xE1vel de ambiente <code>ASDF_DOWNLOAD_PATH</code>. Se o c\xF3digo-fonte ou bin\xE1rio baixado estiver compactado, apenas o c\xF3digo-fonte ou bin\xE1rio descompactado poder\xE1 ser colocado no diret\xF3rio <code>ASDF_DOWNLOAD_PATH</code>.</p><p>O script deve sair com um status de <code>0</code> quando o download for bem-sucedido. Se o download falhar, o script deve sair com qualquer status de sa\xEDda diferente de zero.</p><p>Se poss\xEDvel, o script deve apenas colocar arquivos no <code>ASDF_DOWNLOAD_PATH</code>. Se o download falhar, nenhum arquivo deve ser colocado no diret\xF3rio.</p><p>Se este script n\xE3o estiver presente, o asdf assumir\xE1 que o script <code>bin/install</code> est\xE1 presente e far\xE1 o download e instalar\xE1 a vers\xE3o. asdf s\xF3 funciona sem este script para suportar plugins legados. Todos os plugins devem incluir este script e, eventualmente, o suporte para plugins legados ser\xE1 removido.</p><h4 id="bin-install" tabindex="-1"><a class="header-anchor" href="#bin-install" aria-hidden="true">#</a> bin/install</h4><p>Este script deve instalar a vers\xE3o, no caminho mencionado em <code>ASDF_INSTALL_PATH</code>. Por padr\xE3o, o asdf criar\xE1 shims para qualquer arquivo em <code>$ASDF_INSTALL_PATH/bin</code> (isso pode ser personalizado com o script opcional <a href="#binlist-bin-paths">bin/list-bin-paths</a>).</p><p>O script de instala\xE7\xE3o deve sair com um status de <code>0</code> quando a instala\xE7\xE3o for bem-sucedida. Se a instala\xE7\xE3o falhar, o script deve sair com qualquer status de sa\xEDda diferente de zero.</p>',8),_=e("Se poss\xEDvel, o script deve apenas colocar os arquivos no diret\xF3rio "),y=s("code",null,"ASDF_INSTALL_PATH",-1),x=e(" uma vez que a compila\xE7\xE3o e instala\xE7\xE3o da ferramenta s\xE3o consideradas bem sucedidas pelo script de instala\xE7\xE3o. asdf "),q={href:"https://github.com/asdf-vm/asdf/blob/242d132afbf710fe3c7ec23c68cec7bdd2c78ab5/lib/utils.sh#L44",target:"_blank",rel:"noopener noreferrer"},A=e("verifica a exist\xEAncia"),D=e(" do diret\xF3rio "),S=s("code",null,"ASDF_INSTALL_PATH",-1),E=e(" para determinar se essa vers\xE3o da ferramenta est\xE1 instalado. Se o diret\xF3rio "),I=s("code",null,"ASDF_INSTALL_PATH",-1),T=e(" for preenchido no in\xEDcio do processo de instala\xE7\xE3o, outros comandos asdf executados em outros terminais durante a instala\xE7\xE3o podem considerar essa vers\xE3o da ferramenta instalada, mesmo quando n\xE3o estiver totalmente instalada."),k=n(`<p>Se voc\xEA quiser que seu plugin funcione com asdf vers\xE3o 0.7._ e anterior e vers\xE3o 0.8._ e mais recente, verifique a presen\xE7a da vari\xE1vel de ambiente <code>ASDF_DOWNLOAD_PATH</code>. Se n\xE3o estiver definido, baixe o c\xF3digo-fonte no retorno de chamada bin/install. Se estiver definido, suponha que o script <code>bin/download</code> j\xE1 tenha baixado.</p><h2 id="scripts-opcional" tabindex="-1"><a class="header-anchor" href="#scripts-opcional" aria-hidden="true">#</a> Scripts Opcional</h2><h4 id="scripts-bin-help" tabindex="-1"><a class="header-anchor" href="#scripts-bin-help" aria-hidden="true">#</a> scripts bin/help</h4><p>Este n\xE3o \xE9 um script de retorno de chamada, mas sim um conjunto de scripts de retorno de chamada que imprimem documenta\xE7\xE3o diferente para STDOUT. Os scripts de retorno de chamada poss\xEDveis est\xE3o listados abaixo. Observe que <code>bin/help.overview</code> \xE9 um caso especial, pois deve estar presente para que qualquer sa\xEDda de ajuda seja exibida para o script.</p><ul><li><code>bin/help.overview</code> - Este script deve gerar uma descri\xE7\xE3o geral sobre o plugin e a ferramenta que est\xE1 sendo gerenciada. Nenhum t\xEDtulo deve ser impresso, pois o asdf imprimir\xE1 t\xEDtulos. A sa\xEDda pode ser um texto de formato livre, mas idealmente apenas um par\xE1grafo curto. Este script deve estar presente se voc\xEA quiser que o asdf forne\xE7a informa\xE7\xF5es de ajuda para seu plugin. Todos os outros scripts de retorno de chamada de ajuda s\xE3o opcionais.</li><li><code>bin/help.deps</code> - Esse script deve gerar a lista de depend\xEAncias adaptadas ao sistema operacional. Uma depend\xEAncia por linha.</li><li><code>bin/help.config</code> - Este script deve imprimir qualquer configura\xE7\xE3o obrigat\xF3ria ou opcional que possa estar dispon\xEDvel para o plug-in e a ferramenta. Quaisquer vari\xE1veis de ambiente ou outros sinalizadores necess\xE1rios para instalar ou compilar a ferramenta (para o sistema operacional dos usu\xE1rios quando poss\xEDvel). A sa\xEDda pode ser texto de formato livre.</li><li><code>bin/help.links</code> - Esta deve ser uma lista de links relevantes para o plug-in e a ferramenta (mais uma vez, adaptados ao sistema operacional atual, quando poss\xEDvel). Um link por linha. As linhas podem estar no formato <code>&lt;title&gt;: &lt;link&gt;</code> ou apenas <code>&lt;link&gt;</code>.</li></ul><p>Cada um desses scripts deve adaptar sua sa\xEDda ao sistema operacional atual. Por exemplo, quando no Ubuntu, o script deps pode gerar as depend\xEAncias como pacotes apt-get que devem ser instalados. O script tamb\xE9m deve adaptar sua sa\xEDda ao valor de <code>ASDF_INSTALL_VERSION</code> e <code>ASDF_INSTALL_TYPE</code> quando as vari\xE1veis forem definidas. Eles s\xE3o opcionais e nem sempre ser\xE3o definidos.</p><p>O script de retorno de chamada de ajuda N\xC3O DEVE gerar nenhuma informa\xE7\xE3o que j\xE1 esteja coberta na documenta\xE7\xE3o principal do asdf-vm. As informa\xE7\xF5es gerais de uso do asdf n\xE3o devem estar presentes.</p><h4 id="bin-list-bin-paths" tabindex="-1"><a class="header-anchor" href="#bin-list-bin-paths" aria-hidden="true">#</a> bin/list-bin-paths</h4><p>Liste os execut\xE1veis para a vers\xE3o especificada da ferramenta. Deve imprimir uma string com uma lista separada por espa\xE7os de caminhos de diret\xF3rios que cont\xEAm execut\xE1veis. Os caminhos devem ser relativos ao caminho de instala\xE7\xE3o passado. A sa\xEDda de exemplo seria:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">bin tools veggies</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Isso instruir\xE1 o asdf a criar shims para os arquivos em <code>&lt;install-path&gt;/bin</code>, <code>&lt;install-path&gt;/tools</code> e <code>&lt;install-path&gt;/veggies</code></p><p>Se este script n\xE3o for especificado, o asdf procurar\xE1 o diret\xF3rio <code>bin</code> em uma instala\xE7\xE3o e criar\xE1 shims para eles.</p><h4 id="bin-exec-env" tabindex="-1"><a class="header-anchor" href="#bin-exec-env" aria-hidden="true">#</a> bin/exec-env</h4><p>Configure o env para executar os bin\xE1rios no pacote.</p><h4 id="bin-exec-path" tabindex="-1"><a class="header-anchor" href="#bin-exec-path" aria-hidden="true">#</a> bin/exec-path</h4><p>Obtenha o caminho execut\xE1vel para a vers\xE3o especificada da ferramenta. Deve imprimir uma string com o caminho execut\xE1vel relativo. Isso permite que o plug-in substitua condicionalmente o caminho execut\xE1vel especificado do shim, caso contr\xE1rio, retorne o caminho padr\xE3o especificado pelo shim.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">Usage:</span></span>
<span class="line"><span style="color:#F8F8F2;">  plugin/bin/exec-path </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">install-path</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">command</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">executable-path</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Example Call:</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#F92672;">~</span><span style="color:#F8F8F2;">/.asdf/plugins/foo/bin/exec-path </span><span style="color:#E6DB74;">&quot;~/.asdf/installs/foo/1.0&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;foo&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;bin/foo&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Output:</span></span>
<span class="line"><span style="color:#F8F8F2;">  bin/foox</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="bin-uninstall" tabindex="-1"><a class="header-anchor" href="#bin-uninstall" aria-hidden="true">#</a> bin/uninstall</h4><p>Desinstala uma vers\xE3o espec\xEDfica de uma ferramenta.</p><h4 id="bin-list-legacy-filenames" tabindex="-1"><a class="header-anchor" href="#bin-list-legacy-filenames" aria-hidden="true">#</a> bin/list-legacy-filenames</h4><p>Registre arquivos setter adicionais para este plugin. Deve imprimir uma string com uma lista de nomes de arquivos separados por espa\xE7os.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">.ruby-version .rvmrc</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Nota: Isso s\xF3 se aplica a usu\xE1rios que habilitaram a op\xE7\xE3o <code>legacy_version_file</code> em seu <code>~/.asdfrc</code>.</p><h4 id="bin-parse-legacy-file" tabindex="-1"><a class="header-anchor" href="#bin-parse-legacy-file" aria-hidden="true">#</a> bin/parse-legacy-file</h4><p>Isso pode ser usado para analisar ainda mais o arquivo legado encontrado pelo asdf. Se o <code>parse-legacy-file</code> n\xE3o for implementado, o asdf simplesmente ir\xE1 cat o arquivo para determinar a vers\xE3o. O script receber\xE1 o caminho do arquivo como seu primeiro argumento.</p><h4 id="bin-post-plugin-add" tabindex="-1"><a class="header-anchor" href="#bin-post-plugin-add" aria-hidden="true">#</a> bin/post-plugin-add</h4><p>Isso pode ser usado para executar qualquer a\xE7\xE3o p\xF3s-instala\xE7\xE3o depois que o plug-in for adicionado ao asdf.</p><p>O script tem acesso ao caminho em que o plugin foi instalado (<code>\${ASDF_PLUGIN_PATH}</code>) e o URL de origem (<code>\${ASDF_PLUGIN_SOURCE_URL}</code>), se algum foi usado.</p><p>Veja tamb\xE9m os ganchos relacionados:</p><ul><li><code>pre_asdf_plugin_add</code></li><li><code>pre_asdf_plugin_add_\${plugin_name}</code></li><li><code>post_asdf_plugin_add</code></li><li><code>post_asdf_plugin_add_\${plugin_name}</code></li></ul><h4 id="bin-pre-plugin-remove" tabindex="-1"><a class="header-anchor" href="#bin-pre-plugin-remove" aria-hidden="true">#</a> bin/pre-plugin-remove</h4><p>Isso pode ser usado para executar qualquer a\xE7\xE3o de pr\xE9-remo\xE7\xE3o antes que o plug-in seja removido do asdf.</p><p>O script tem acesso ao caminho em que o plugin foi instalado (<code>\${ASDF_PLUGIN_PATH}</code>).</p><p>Veja tamb\xE9m os ganchos relacionados:</p><ul><li><code>pre_asdf_plugin_remove</code></li><li><code>pre_asdf_plugin_remove_\${plugin_name}</code></li><li><code>post_asdf_plugin_remove</code></li><li><code>post_asdf_plugin_remove_\${plugin_name}</code></li></ul><h2 id="comandos-de-extensao-para-asdf-cli" tabindex="-1"><a class="header-anchor" href="#comandos-de-extensao-para-asdf-cli" aria-hidden="true">#</a> Comandos de extens\xE3o para asdf CLI.</h2><p>\xC9 poss\xEDvel que plugins definam novos comandos asdf fornecendo scripts ou execut\xE1veis <code>lib/commands/command*.bash</code> que ser\xE1 chamado usando a interface de linha de comando asdf usando o nome do plug-in como um subcomando.</p><p>Por exemplo, suponha que um plugin <code>foo</code> tenha:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">foo/</span></span>
<span class="line"><span style="color:#F8F8F2;">  lib/commands/</span></span>
<span class="line"><span style="color:#F8F8F2;">    command.bash</span></span>
<span class="line"><span style="color:#F8F8F2;">    command-bat.bash</span></span>
<span class="line"><span style="color:#F8F8F2;">    command-bat-man.bash</span></span>
<span class="line"><span style="color:#F8F8F2;">    command-help.bash</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Os usu\xE1rios agora podem executar</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">$ asdf foo         </span><span style="color:#88846F;"># same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command.bash\`</span></span>
<span class="line"><span style="color:#F8F8F2;">$ asdf foo bar     </span><span style="color:#88846F;"># same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command.bash bar\`</span></span>
<span class="line"><span style="color:#F8F8F2;">$ asdf foo </span><span style="color:#66D9EF;">help</span><span style="color:#F8F8F2;">    </span><span style="color:#88846F;"># same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command-help.bash\`</span></span>
<span class="line"><span style="color:#F8F8F2;">$ asdf foo bat man </span><span style="color:#88846F;"># same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command-bat-man.bash\`</span></span>
<span class="line"><span style="color:#F8F8F2;">$ asdf foo bat baz </span><span style="color:#88846F;"># same as running \`$ASDF_DATA_DIR/plugins/foo/lib/commands/command-bat.bash baz\`</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Os autores de plugins podem usar esse recurso para fornecer utilit\xE1rios relacionados \xE0s suas ferramentas, ou at\xE9 mesmo criar plugins que s\xE3o apenas novas extens\xF5es de comando para o pr\xF3prio asdf.</p><p>Quando invocados, se os comandos de extens\xE3o n\xE3o tiverem seus bits execut\xE1veis definidos, eles ser\xE3o originado como scripts bash, tendo todas as fun\xE7\xF5es de <code>$ASDF_DIR/lib/utils.bash</code> dispon\xEDveis. Al\xE9m disso, o <code>$ASDF_CMD_FILE</code> resolve para o caminho completo do arquivo que est\xE1 sendo originado. Se o bit execut\xE1vel estiver definido, eles s\xE3o apenas executados e substituem a execu\xE7\xE3o do asdf.</p>`,43),O=e("Um bom exemplo desse recurso \xE9 para plugins como "),L={href:"https://github.com/asdf-community/asdf-haxe",target:"_blank",rel:"noopener noreferrer"},N=s("code",null,"haxe",-1),P=e(" que fornece o "),B=s("code",null,"asdf haxe neko-dylibs-link",-1),$=e(" para corrigir um problema onde os execut\xE1veis haxe esperam encontrar bibliotecas din\xE2micas relativas ao diret\xF3rio execut\xE1vel."),H=n(`<p>Se o seu plug-in fornecer um comando de extens\xE3o asdf, certifique-se de mencion\xE1-lo no README do seu plug-in.</p><h2 id="modelos-de-calcos-personalizados" tabindex="-1"><a class="header-anchor" href="#modelos-de-calcos-personalizados" aria-hidden="true">#</a> Modelos de cal\xE7os personalizados</h2><p><strong>POR FAVOR, use este recurso apenas se for absolutamente necess\xE1rio</strong></p><p>asdf permite modelos de cal\xE7os personalizados. Para um execut\xE1vel chamado <code>foo</code>, se houver um arquivo <code>shims/foo</code> no plug-in, o asdf copiar\xE1 esse arquivo em vez de usar seu modelo padr\xE3o de shim.</p><p>Isso deve ser usado com sabedoria. Por enquanto AFAIK, est\xE1 sendo usado apenas no plugin Elixir, porque um execut\xE1vel tamb\xE9m \xE9 lido como um arquivo Elixir, al\xE9m de ser apenas um execut\xE1vel. O que torna imposs\xEDvel usar o cal\xE7o bash padr\xE3o.</p><h2 id="testando-plug-ins" tabindex="-1"><a class="header-anchor" href="#testando-plug-ins" aria-hidden="true">#</a> Testando plug-ins</h2><p><code>asdf</code> cont\xE9m o comando <code>plugin-test</code> para testar seu plugin. Voc\xEA pode us\xE1-lo da seguinte forma</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">asdf plugin </span><span style="color:#66D9EF;">test</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">plugin-name</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">plugin-url</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> [--asdf-tool-version </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">version</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;">] [--asdf-plugin-gitref </span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">git-ref</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;">] [test-command</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Apenas os dois primeiros argumentos s\xE3o necess\xE1rios. Se _<em>version</em> for especificado, a ferramenta ser\xE1 instalada com essa vers\xE3o espec\xEDfica. O padr\xE3o \xE9 o que retorna <code>asdf mais recente &lt;plugin-name&gt;</code>. Se <em>git-ref</em> for especificado, o plug-in em si \xE9 verificado nesse commit/branch/tag, \xFAtil para testar um pull-request no CI do seu plug-in.</p><p>Os argumentos Rest s\xE3o considerados o comando a ser executado para garantir que a ferramenta instalada funcione corretamente. Normalmente seria algo que leva <code>--version</code> ou <code>--help</code>. Por exemplo, para testar o plugin NodeJS, podemos executar</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">asdf plugin </span><span style="color:#66D9EF;">test</span><span style="color:#F8F8F2;"> nodejs https://github.com/asdf-vm/asdf-nodejs.git node --version</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\xC9 altamente recomend\xE1vel que voc\xEA teste seu plug-in em um ambiente CI e verifique se ele funciona no Linux e no OSX.</p><h4 id="exemplo-github-action" tabindex="-1"><a class="header-anchor" href="#exemplo-github-action" aria-hidden="true">#</a> Exemplo GitHub Action</h4>`,13),U=e("O reposit\xF3rio "),R={href:"https://github.com/asdf-vm/actions",target:"_blank",rel:"noopener noreferrer"},j=e("asdf-vm/actions"),z=e(" fornece uma a\xE7\xE3o do GitHub para testar seus plugins hospedados no github."),w=n(`<div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F92672;">steps</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">  - </span><span style="color:#F92672;">name</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">asdf_plugin_test</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">uses</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">asdf-vm/actions/plugin-test@v1</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">with</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">command</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">&quot;my_tool --version&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#F92672;">env</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#F92672;">GITHUB_API_TOKEN</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">\${{ secrets.GITHUB_TOKEN }}</span><span style="color:#F8F8F2;"> </span><span style="color:#88846F;"># automatically provided</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="exemplo-de-configuracao-do-travisci" tabindex="-1"><a class="header-anchor" href="#exemplo-de-configuracao-do-travisci" aria-hidden="true">#</a> Exemplo de configura\xE7\xE3o do TravisCI</h4><p>Aqui est\xE1 um arquivo <code>.travis.yml</code> de amostra, personalize-o de acordo com suas necessidades</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F92672;">language</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">c</span></span>
<span class="line"><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">asdf plugin test nodejs $TRAVIS_BUILD_DIR &#39;node --version&#39;</span></span>
<span class="line"><span style="color:#F92672;">before_script</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">  - </span><span style="color:#E6DB74;">git clone https://github.com/asdf-vm/asdf.git asdf</span></span>
<span class="line"><span style="color:#F8F8F2;">  - </span><span style="color:#E6DB74;">. asdf/asdf.sh</span></span>
<span class="line"><span style="color:#F92672;">os</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">  - </span><span style="color:#E6DB74;">linux</span></span>
<span class="line"><span style="color:#F8F8F2;">  - </span><span style="color:#E6DB74;">osx</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notas: Ao usar outro IC, voc\xEA precisar\xE1 verificar qual vari\xE1vel mapeia para o caminho do reposit\xF3rio.</p><p>Voc\xEA tamb\xE9m tem a op\xE7\xE3o de passar um caminho relativo para <code>plugin-test</code>.</p><p>Por exemplo, se o script de teste for executado no diret\xF3rio: <code>asdf plugin test nodejs . &#39;node --version&#39;</code>.</p><h2 id="limitacao-de-taxa-da-api-do-github" tabindex="-1"><a class="header-anchor" href="#limitacao-de-taxa-da-api-do-github" aria-hidden="true">#</a> Limita\xE7\xE3o de taxa da API do GitHub</h2><p>Se o <code>list-all</code> do seu plug-in depender do acesso \xE0 API do GitHub, certifique-se de fornecer um token de autoriza\xE7\xE3o ao acess\xE1-lo, caso contr\xE1rio, seus testes podem falhar devido \xE0 limita\xE7\xE3o de taxa.</p>`,9),C=e("Para fazer isso, crie um "),V={href:"https://github.com/settings/tokens/new",target:"_blank",rel:"noopener noreferrer"},G=e("novo token pessoal"),K=e(" com apenas acesso "),W=s("code",null,"public_repo",-1),M=e("."),Y=n(`<p>Em seguida, nas configura\xE7\xF5es de compila\xE7\xE3o do travis.ci, adicione uma vari\xE1vel de ambiente <em>secure</em> para ela chamada algo como <code>GITHUB_API_TOKEN</code>. E <em>NUNCA</em> publique seu token em seu c\xF3digo.</p><p>Finalmente, adicione algo como o seguinte para <code>bin/list-all</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#272822;"><code><span class="line"><span style="color:#F8F8F2;">cmd=</span><span style="color:#E6DB74;">&quot;curl -s&quot;</span></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> [ </span><span style="color:#F92672;">-n</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">&quot;</span><span style="color:#F8F8F2;">$GITHUB_API_TOKEN</span><span style="color:#E6DB74;">&quot;</span><span style="color:#F8F8F2;"> ]</span><span style="color:#F92672;">;</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">then</span></span>
<span class="line"><span style="color:#F8F8F2;"> cmd=</span><span style="color:#E6DB74;">&quot;</span><span style="color:#F8F8F2;">$cmd</span><span style="color:#E6DB74;"> -H &#39;Authorization: token </span><span style="color:#F8F8F2;">$GITHUB_API_TOKEN</span><span style="color:#E6DB74;">&#39;&quot;</span></span>
<span class="line"><span style="color:#F92672;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">cmd=</span><span style="color:#E6DB74;">&quot;</span><span style="color:#F8F8F2;">$cmd</span><span style="color:#E6DB74;"> </span><span style="color:#F8F8F2;">$releases_path</span><span style="color:#E6DB74;">&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="enviando-plugins-para-o-repositorio-oficial-de-plugins" tabindex="-1"><a class="header-anchor" href="#enviando-plugins-para-o-repositorio-oficial-de-plugins" aria-hidden="true">#</a> Enviando plugins para o reposit\xF3rio oficial de plugins</h2><p><code>asdf</code> pode facilmente instalar plugins especificando o url do reposit\xF3rio de plugins, por exemplo. <code>plugin add my-plugin https://github.com/user/asdf-my-plugin.git</code>.</p><p>Para facilitar para seus usu\xE1rios, voc\xEA pode adicionar seu plugin ao reposit\xF3rio oficial de plugins para ter seu plugin listado e facilmente instal\xE1vel usando um comando mais curto, por exemplo <code>asdf plugin add my-plugin</code>.</p>`,6),Q=e("Siga as instru\xE7\xF5es no reposit\xF3rio de plugins: "),X={href:"https://github.com/asdf-vm/asdf-plugins",target:"_blank",rel:"noopener noreferrer"},J=e("asdf-vm/asdf-plugins"),Z=e(".");function ee(se,ae){const a=r("ExternalLinkIcon");return l(),d("div",null,[p,s("p",null,[t,u,m,h,v,s("a",b,[F,o(a)]),f]),g,s("p",null,[_,y,x,s("a",q,[A,o(a)]),D,S,E,I,T]),k,s("p",null,[O,s("a",L,[N,o(a)]),P,B,$]),H,s("p",null,[U,s("a",R,[j,o(a)]),z]),w,s("p",null,[C,s("a",V,[G,o(a)]),K,W,M]),Y,s("p",null,[Q,s("a",X,[J,o(a)]),Z])])}const ne=i(c,[["render",ee],["__file","create.html.vue"]]);export{ne as default};
